<!-- FULL SCREEN MAP -->
<div id="map"></div>

<!-- FLOATING SEARCH (Top Center) -->
<div class="floating-search">
  <div class="search-container">
    <input 
      type="text" 
      [(ngModel)]="searchQuery"
      (input)="onSearchChange()"
      placeholder="Search spots...">
  </div>
</div>

<!-- SIDEBAR (Left, Collapsible) -->
<aside class="sidebar" [class.collapsed]="sidebarCollapsed()">
  <button class="sidebar-toggle" (click)="toggleSidebar()">
    <span>{{ sidebarCollapsed() ? '‚ñ∂' : '‚óÄ' }}</span>
  </button>
  
  <div class="sidebar-header">
    <h3>Nearby Spots</h3>
    <span class="spot-count">{{ filteredSpots().length }} spots found</span>
    
    <!-- Category Filters (Inside Sidebar) -->
    <div class="category-filters">
      <button 
        class="category-pill"
        [class.active]="selectedCategory() === null"
        (click)="setCategory(null)">
        All Spots
      </button>
      
      @for (item of spotTypes; track item.type) {
        <button 
          class="category-pill"
          [class.active]="selectedCategory() === item.type"
          (click)="setCategory(item.type)">
          {{ item.emoji }} {{ item.label }}
        </button>
      }
    </div>
  </div>
  
  <div class="spot-list">
    @for (spot of filteredSpots(); track spot.id; let i = $index) {
      <div 
        class="spot-item"
        [class.active]="selectedSpot()?.id === spot.id"
        (click)="selectSpot(spot)">
        
        <div class="spot-number">{{ i + 1 }}</div>
        
        <div class="spot-info">
          <h4>{{ spot.name }}</h4>
          <p class="spot-address">{{ spot.address }}</p>
          <div class="spot-meta">
            <span class="spot-type">
              {{ getSpotTypeEmoji(spot.type) }} {{ getSpotTypeLabel(spot.type) }}
            </span>
            <span class="spot-rating">
              {{ getStars(spot.rating) }} {{ spot.rating }}
            </span>
          </div>
        </div>
        
      </div>
    }
  </div>
</aside>

<!-- MAP CONTROLS (Top Right) -->
<div class="map-controls">
  <button 
    class="map-control-btn" 
    title="My Location"
    (click)="myLocation()">
    üìç
  </button>
  <button 
    class="map-control-btn" 
    title="Clean Filters"
    (click)="clearFilters()">
    üîÑ
  </button>
</div>

@if (selectedSpot()) {
  <div class="info-card show">
    <button class="close-btn" (click)="closeCard()">√ó</button>
    
    <div class="card-header">
      <h4>{{ selectedSpot()!.name }}</h4>
      <span class="card-type">
        {{ getSpotTypeEmoji(selectedSpot()!.type) }} 
        {{ getSpotTypeLabel(selectedSpot()!.type) }}
      </span>
    </div>

    <p class="card-address">{{ selectedSpot()!.address }}</p>

    <div class="card-stats">
      <div>
        <span class="stat-label">Rating</span>
        <span class="stat-value">
          <span class="stars">{{ getStars(selectedSpot()!.rating) }}</span> 
          {{ selectedSpot()!.rating }}
        </span>
      </div>
      <div>
        <span class="stat-label">Review Count</span>
        <span class="stat-value">{{ selectedSpot()!.reviewCount }}</span>
      </div>
      <div>
        <span class="stat-label">Distance</span>
        <span class="stat-value">{{ calculateDistance(selectedSpot()!) }}</span>
      </div>
      <div>
        <span class="stat-label">Best Hour</span>
        <span class="stat-value">{{ getBestTime(selectedSpot()!) }}</span>
      </div>
    </div>

    <button class="view-btn">Show Details ‚Üí</button>
  </div>
}